<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>TheWordSearchGame</title>
		<link
			href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="styles.css" />
		<link rel="stylesheet" href="game.css" />

		<!-- Path to your CSS file -->
	</head>

	<!-- div stuff goes here (content that will actually get displayed) -->

	<body id="mainContent" style="display: none">
		<div class="" id="homepage">
			<h1>TheWordSearchGame</h1>

			<div id="wordGrid"></div>

			<label id="topMessage"></label>

			<p>Enter your user name</p>

			<input type="text" id="username" /><br /><br />
			<button class="enterLobby" type="button">Enter Lobby</button>
		</div>

		<div class="hidden" id="lobbyPage">
			<div class="leaderboard-container" id="leaderboardStats">
				<h2>TWSG Leaderboard</h2>
				<div class="leaderboard-list"></div>
			</div>
			<div class="games-container" id="lobbyContent">
				<h2>TheWordSearchGame Lobby</h2>

				<!-- Active Players List -->
				<div class="active-players">
					<h3>Active Players</h3>
				</div>

				<!-- Game Creation Form -->
				<div class="game-creation">
					<input type="text" placeholder="Room Name" id="roomName" />
					<label><input type="radio" name="roomSize" value="2" /> 2</label>
					<label><input type="radio" name="roomSize" value="3" /> 3</label>
					<label><input type="radio" name="roomSize" value="4" /> 4</label>
					<label><input type="radio" name="roomSize" value="5" /> 5</label>
					<button id="createGame">Create Game</button>
				</div>

				<!-- List of Games -->
				<div class="games-list">
					<h3>Available Games</h3>
				</div>
			</div>

			<div class="game-section" id="gamePage">
				<!-- Existing content -->
				<div class="game-timer">
					<h3>Time Remaining:</h3>
					<span id="timerDisplay">03:00</span> <!-- Initial timer display -->
				</div>

			</div>


			<div class="chat-container" id="chatBox">
				<h2>Global Chat</h2>
				<div class="messagesContainer"></div>
				<div class="messageInputContainer">
					<textarea
						class="messageTextbox"
						placeholder="Your Message"
						name="messageTextbox"
						required
					></textarea>
					<button id="sendMessageButton" type="button">Send Message</button>
				</div>
			</div>
		</div>

		<div class="hidden" id="gamePage">
			<!-- Left Box: Player List and Scores -->
			<div class="game-section players-list hidden">
				<h2>Players</h2>
				<div class="player-entry">
					<span>Alice</span>
					<span class="score">120</span>
				</div>
				<div class="player-entry">
					<span>Bob</span>
					<span class="score">150</span>
				</div>
			</div>

			<!-- Middle Box: Game Preparation and Game Grid -->
			<div class="game-section game-area">
				<div class="pre-game-lobby">
					<h2 class="lobby-title">Waiting for players to join</h2>
					<div class="player-slots-container">
						<div class="waiting-players-box"></div>
						<button id="startGameButton" disabled>Start Game</button>
					</div>
				</div>
				<div id="gameGrid" class="game-grid hidden"></div>
			</div>

			<!-- Right Box: Word Bank -->
			<div class="game-section word-bank hidden">
				<h2>Word Bank</h2>
				<ul class="word-bank-list">
					<li class="found">Example</li>
					<li>Word</li>
					<li>Iphone</li>
					<li>Word</li>
					<li>Word</li>
					<li>Word</li>
					<!-- Additional words -->
				</ul>
			</div>
		</div>
		
		<script>
			//var ClientId; // This is an ID from the server, value of 1 to N.  It is unique to this client
			var playerIdx = "nick";
			var gameId = -1;
			var GameSession;
			var Version;
			class UserEvent {
				// Button = -1;
				playerIdx = "nick";
				gameId = 0;
			}
			connection.onmessage = function (evt) {
            var msg = evt.data;
            console.log("Message received: " + msg);
            const obj = JSON.parse(msg);

            // Only a couple of different messages can arrive here.
            // let's make a block of code to handle each of them.

            // Placing the name of the class in the class is a hack,
            // but it makes this code more deliberate
            if ('ServerEvent' in obj) {
                ClientId = obj.ClientId;
                // gameId may not have a valid value at this time...
                gameId = obj.ClientId;
                Version = obj.Version;
                document.getElementById("Version").innerHTML = "Version: " + Version;                
            }
        }
		</script>
		<script src="App.js"></script>
		<script src="home.js"></script>
		<script src="lobby.js"></script>

		<script src="App.js"></script>
		<script src="home.js"></script>
		<script src="lobby.js"></script>
		<!-- <script src="ready.js"></script> -->
		<script src="game.js"></script>
	</body>
</html>